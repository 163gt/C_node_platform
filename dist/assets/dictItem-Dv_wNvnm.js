import{_ as j,J as E,r as c,q as G,B as I,j as u,e as J,o as L,f as r,h as a,n as m,G as N,w as n,k as f,z as S}from"./index-DMicvl7E.js";import{q as M,u as Q,c as H,_ as K}from"./dictTag-DbkYWqrS.js";import{P as W}from"./pagination-BeRdfJKn.js";import{F as X,A as U,R as Y}from"./ReturnDownBackOutline-p-vbYhRe.js";const Z={class:"main-content main_body"},ee={class:"main_body_content"},te={class:"header_box"},ae={class:"header_boxs"},le={class:"header_box_title"},oe={class:"header_box_title"},ne={class:"header_boxs"},se={class:"content_box"},ue={style:{display:"flex"}},ie={__name:"dictItem",setup(re){const p=E(),k=c(null),i=c({dictionaryCode:null,dictionaryName:null,page:1,pageSize:10,label:null}),s=c({dictShow:!1,title:"添加标签",btn:1}),y={label:"",dictionaryCode:null,value:"",status:1},l=c({...y}),D=c(0),d=c(!1),g=c([]),q=c([{title:"序号",key:"id",render:(t,e)=>`${e+1}`},{title:"标签名称",key:"label",render(t){return S("span",{style:{cursor:"pointer",color:"var(--text--purple)"},onClick:()=>b(t)},{default:()=>t.label})}},{title:"标签键值",key:"value"},{title:"状态",key:"status",render(t){return S(K,{dictionaryCode:"sys_status",value:t.status,type:t.status===1?"success":"error",round:!0})}}]),B=t=>{t.preventDefault(),d.value=!0,k.value?.validate(e=>{if(e)d.value=!1,Nmessage.error("参数校验失败");else switch(s.value.btn){case 1:H(l.value).then(v=>{d.value=!1,s.value.dictShow=!1,h(),Nmessage.success("添加成功！")}).catch(v=>{Nmessage.error(v.message),d.value=!1});break;case 2:Q(l.value).then(v=>{d.value=!1,s.value.dictShow=!1,h(),Nmessage.success("修改成功！")}).catch(v=>{Nmessage.error(v.message),d.value=!1});break}})},P=t=>({style:"cursor: pointer;",onClick:()=>{b(t)}}),R=t=>{i.value=t},F=()=>{l.value={...y}},b=t=>{s.value.dictShow=!0,t?(l.value={...t},s.value.title="修改标签",s.value.btn=2):(s.value.title="添加标签",s.value.btn=1)},h=()=>{M(i.value).then(t=>{g.value=t.data,D.value=t.total})};return G(()=>{i.value.dictionaryCode=p.query.dictionaryCode,i.value.dictionaryName=p.query.dictionaryName,y.dictionaryCode=p.query.dictionaryCode,l.value.dictionaryCode=p.query.dictionaryCode,h()}),I(()=>l.value,t=>{/^\d+$/.test(t.value)&&(t.value=Number(t.value))},{deep:!0}),I(()=>s.value.dictShow,t=>{t||F()}),(t,e)=>{const v=u("n-icon"),V=u("NInput"),w=u("CButton"),$=u("NDataTable"),x=u("n-spin"),C=u("n-input"),_=u("n-form-item"),z=u("n-switch"),T=u("n-form"),A=u("n-drawer-content"),O=u("NDrawer");return L(),J("div",Z,[r("div",ee,[r("div",te,[r("div",ae,[r("div",le,[e[8]||(e[8]=m(" 字典名称：",-1)),r("span",null,N(i.value.dictionaryName),1)]),r("div",oe,[e[9]||(e[9]=m(" 字典编号：",-1)),r("span",null,N(i.value.dictionaryCode),1)])]),r("div",ne,[a(V,{value:i.value.label,"onUpdate:value":e[0]||(e[0]=o=>i.value.label=o),placeholder:"标签名称",style:{width:"288px"},class:"header_box_item"},{prefix:n(()=>[a(v,{component:f(X)},null,8,["component"])]),_:1},8,["value"]),a(w,{onClick:e[1]||(e[1]=o=>b()),icon:f(U),type:"CPrimary"},{default:n(()=>[...e[10]||(e[10]=[m("添 加",-1)])]),_:1},8,["icon"])])]),a(x,{size:"large",show:d.value},{default:n(()=>[r("div",se,[a($,{columns:q.value,data:g.value,bordered:!0,"row-props":P},null,8,["columns","data"])])]),_:1},8,["show"]),a(W,{modelValue:i.value,"onUpdate:modelValue":[e[2]||(e[2]=o=>i.value=o),R],total:D.value},null,8,["modelValue","total"])]),a(O,{show:s.value.dictShow,"onUpdate:show":e[7]||(e[7]=o=>s.value.dictShow=o),width:"40%"},{default:n(()=>[a(A,{title:s.value.title},{footer:n(()=>[a(x,{show:d.value},{default:n(()=>[r("div",ue,[a(w,{onClick:B,icon:f(U),type:"CPrimary"},{default:n(()=>[m(N(s.value.btn===1?"添 加":"修 改"),1)]),_:1},8,["icon"]),a(w,{onClick:t.closedictShow,icon:f(Y)},{default:n(()=>[...e[11]||(e[11]=[m("取 消",-1)])]),_:1},8,["onClick","icon"])])]),_:1},8,["show"])]),default:n(()=>[a(T,{ref_key:"formRef",ref:k,model:l.value,rules:t.dictRules},{default:n(()=>[a(_,{label:"字典编码",path:"dictionaryCode"},{default:n(()=>[a(C,{value:l.value.dictionaryCode,"onUpdate:value":e[3]||(e[3]=o=>l.value.dictionaryCode=o),disabled:"",placeholder:"字典编码"},null,8,["value"])]),_:1}),a(_,{label:"标签名称",path:"label"},{default:n(()=>[a(C,{value:l.value.label,"onUpdate:value":e[4]||(e[4]=o=>l.value.label=o),placeholder:"请输入标签名称"},null,8,["value"])]),_:1}),a(_,{label:"标签键值",path:"value"},{default:n(()=>[a(C,{value:l.value.value,"onUpdate:value":e[5]||(e[5]=o=>l.value.value=o),type:"Number",placeholder:"请输入标签键值"},null,8,["value"])]),_:1}),a(_,{label:"状态",path:"status"},{default:n(()=>[a(z,{"checked-value":1,"unchecked-value":2,value:l.value.status,"onUpdate:value":e[6]||(e[6]=o=>l.value.status=o)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])])}}},pe=j(ie,[["__scopeId","data-v-337c83b7"]]);export{pe as default};
