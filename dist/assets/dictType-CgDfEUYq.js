import{_ as j,l as E,r,B as G,q as Y,j as i,e as H,o as J,f as _,h as a,w as o,k as p,m as Q,n as y,G as W,z as C,Y as X}from"./index-DMicvl7E.js";import{g as Z,a as ee,b as te,_ as ae}from"./dictTag-DbkYWqrS.js";import{P as oe}from"./pagination-BeRdfJKn.js";import{F as ne,A as R,R as se}from"./ReturnDownBackOutline-p-vbYhRe.js";import{S as le}from"./SearchCircle-CIxQSjVl.js";const ie={class:"main-content main_body"},re={class:"main_body_content"},ue={class:"header_box"},ce={class:"content_box"},de={style:{display:"flex"}},pe={__name:"dictType",setup(ve){const U=E(),b=r(null),u=r(!1),h=r(!1),g=r([]),d=r({page:1,pageSize:10,dictionaryName:""}),n=r({title:"添加字典",btn:1,dictShow:!1}),k={dictionaryName:"",dictionaryCode:"",description:"",status:1},l=r({...k}),D=r(0),B=r([{title:"序号",key:"id",render:(e,t)=>`${t+1}`},{title:"字典名称",key:"dictionaryName",render(e){return C("span",{style:{cursor:"pointer",color:"var(--text--purple)"},onClick:()=>q(e)},{default:()=>e.dictionaryName})}},{title:"字典编码",key:"dictionaryCode"},{title:"状态",key:"status",render(e){return C(ae,{dictionaryCode:"sys_status",value:e.status,type:e.status===1?"success":"error",round:!0})}},{title:"字典描述",key:"description",render(e){return C(X,{style:{width:"auto"}},{default:()=>e.description})}}]),P=r({dictionaryName:{required:!0,message:"请输入字典名称",trigger:"blur"},dictionaryCode:{required:!0,message:"请输入字典编码",trigger:"blur"}}),T=e=>({style:"cursor: pointer;",onClick:()=>{S(e)}}),V=e=>{d.value=e,w()},w=()=>{v()},S=e=>{n.value.dictShow=!0,e?(l.value={...e},n.value.title="修改字典",n.value.btn=2):(n.value.title="添加字典",n.value.btn=1)},q=e=>{e&&U.push({path:"/system/dictItem",query:{dictionaryCode:e.dictionaryCode,dictionaryName:e.dictionaryName}})},F=e=>{e.preventDefault(),u.value=!0,b.value?.validate(t=>{if(t)u.value=!1,Nmessage.error("参数校验失败");else switch(n.value.btn){case 1:te(l.value).then(c=>{u.value=!1,n.value.dictShow=!1,v(),Nmessage.success("添加成功！")}).catch(c=>{Nmessage.error(c.message),u.value=!1});break;case 2:ee(l.value).then(c=>{u.value=!1,n.value.dictShow=!1,v(),Nmessage.success("修改成功！")}).catch(c=>{Nmessage.error(c.message),u.value=!1});break}})},I=()=>{n.value.dictShow=!1},z=()=>{l.value={...k}},v=()=>{h.value=!0,Z(d.value).then(e=>{g.value=e.data,D.value=e.total,h.value=!1})};return G(()=>n.value.dictShow,(e,t)=>{e||z()}),Y(()=>{v()}),(e,t)=>{const c=i("n-icon"),L=i("NInput"),m=i("CButton"),$=i("NDataTable"),x=i("n-spin"),N=i("n-input"),f=i("n-form-item"),A=i("n-switch"),K=i("n-form"),M=i("n-drawer-content"),O=i("NDrawer");return J(),H("div",ie,[_("div",re,[_("div",ue,[a(L,{value:d.value.dictionaryName,"onUpdate:value":t[0]||(t[0]=s=>d.value.dictionaryName=s),placeholder:"字典名称",style:{width:"288px"},class:"header_box_item",onKeyup:Q(w,["enter"])},{prefix:o(()=>[a(c,{component:p(ne)},null,8,["component"])]),_:1},8,["value"]),a(m,{onClick:w,icon:p(le),type:"CSuccess"},{default:o(()=>[...t[8]||(t[8]=[y("搜 索",-1)])]),_:1},8,["icon"]),a(m,{onClick:t[1]||(t[1]=s=>S()),icon:p(R),type:"CPrimary"},{default:o(()=>[...t[9]||(t[9]=[y("添 加",-1)])]),_:1},8,["icon"])]),a(x,{size:"large",show:h.value},{default:o(()=>[_("div",ce,[a($,{columns:B.value,data:g.value,bordered:!0,"row-props":T},null,8,["columns","data"])])]),_:1},8,["show"]),a(oe,{modelValue:d.value,"onUpdate:modelValue":[t[2]||(t[2]=s=>d.value=s),V],total:D.value},null,8,["modelValue","total"])]),a(O,{show:n.value.dictShow,"onUpdate:show":t[7]||(t[7]=s=>n.value.dictShow=s),width:"40%"},{default:o(()=>[a(M,{title:n.value.title},{footer:o(()=>[a(x,{show:u.value},{default:o(()=>[_("div",de,[a(m,{onClick:F,icon:p(R),type:"CPrimary"},{default:o(()=>[y(W(n.value.btn===1?"添 加":"修 改"),1)]),_:1},8,["icon"]),a(m,{onClick:I,icon:p(se)},{default:o(()=>[...t[10]||(t[10]=[y("取 消",-1)])]),_:1},8,["icon"])])]),_:1},8,["show"])]),default:o(()=>[a(K,{ref_key:"formRef",ref:b,model:l.value,rules:P.value},{default:o(()=>[a(f,{label:"字典名称",path:"dictionaryName"},{default:o(()=>[a(N,{value:l.value.dictionaryName,"onUpdate:value":t[3]||(t[3]=s=>l.value.dictionaryName=s),placeholder:"请输入字典名称"},null,8,["value"])]),_:1}),a(f,{label:"字典编码",path:"dictionaryCode"},{default:o(()=>[a(N,{value:l.value.dictionaryCode,"onUpdate:value":t[4]||(t[4]=s=>l.value.dictionaryCode=s),placeholder:"请输入字典名称"},null,8,["value"])]),_:1}),a(f,{label:"字典编码",path:"description"},{default:o(()=>[a(N,{value:l.value.description,"onUpdate:value":t[5]||(t[5]=s=>l.value.description=s),type:"textarea",placeholder:"字典描述",autosize:{minRows:3}},null,8,["value"])]),_:1}),a(f,{label:"状态",path:"status"},{default:o(()=>[a(A,{"checked-value":1,"unchecked-value":2,value:l.value.status,"onUpdate:value":t[6]||(t[6]=s=>l.value.status=s)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])])}}},we=j(pe,[["__scopeId","data-v-7c5bfde8"]]);export{we as default};
