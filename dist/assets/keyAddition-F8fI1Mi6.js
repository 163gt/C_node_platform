import{W as P,_ as L,r,B as W,q as X,j as u,e as J,o as Q,f as s,h as t,w as l,k as i,m as Y,n as w,G as Z,z as q,X as ee}from"./index-DMicvl7E.js";import{I as N}from"./Icon-CJQe588t.js";import{_ as te}from"./dictTag-DbkYWqrS.js";import{P as le}from"./pagination-BeRdfJKn.js";import{F as ae,A as I,R as oe}from"./ReturnDownBackOutline-p-vbYhRe.js";import{S as ne}from"./SearchCircle-CIxQSjVl.js";import{H as k}from"./HelpCircle-Hdoj66Xd.js";function se(f){return P({url:"/addApiKey",method:"post",data:f})}function ue(f){return P({url:"/queryApiKey",method:"get",params:f})}const re={class:"main-content main_body"},ie={class:"main_body_content"},de={class:"header_box"},pe={class:"content_box"},me={style:{display:"flex","align-items":"center"}},ve={style:{display:"flex","align-items":"center"}},ce={style:{display:"flex","align-items":"center"}},fe={style:{display:"flex"}},ye={style:{flex:"1",display:"flex"}},_e={__name:"keyAddition",setup(f){const x=r(null),p=r(!1),v=r(!1),m=r(1),d=r({modelKeyName:"",page:1,pageSize:10}),C=r(0),U={modelKeyName:"",apiKeyValue:"",baseUrl:"",apiKeyDesc:"",status:1},n=r({...U}),R=r({modelKeyName:{required:!0,message:"请输入密钥名称",trigger:"blur"},apiKeyValue:{required:!0,message:"请输入密钥值",trigger:"blur"},baseUrl:{required:!0,message:"请输入模型地址",trigger:"blur"}}),V=r([]),b=r(!1),F=r([{title:"序号",key:"id",render:(a,e)=>`${e+1}`},{title:"密钥名称",key:"modelKeyName"},{title:"模型地址",key:"baseUrl"},{title:"是否启用",key:"status",render(a){return q(te,{dictionaryCode:"model_status",value:a.status,type:a.status===1?"success":"error",round:!0})}},{title:"操作",key:"action",render(a){return q(ee,{round:!0,quaternary:!0,circle:!0,type:"info",onClick:()=>S(a)},{default:()=>"编辑"})}}]),D=()=>{n.value={...U}},M=a=>{d.value=a,y()},y=()=>{B(d.value)},A=()=>{D(),p.value=!1},S=a=>{a?(n.value=a,m.value=2,p.value=!0):(m.value=1,p.value=!0)},T=a=>{a.preventDefault(),v.value=!0,x.value?.validate(e=>{e?(v.value=!1,Nmessage.error("参数校验失败")):m.value===1?se(n.value).then(_=>{v.value=!1,Nmessage.success("添加密钥成功"),A(),y()}).catch(_=>{v.value=!1,Nmessage.error(_.message)}):m.value})},B=a=>{b.value=!0,ue(a).then(e=>{V.value=e.data,C.value=e.total,b.value=!1}).catch(e=>{Nmessage.error(e.message)})};return W(p,(a,e)=>{a||D()}),X(()=>{B(d.value)}),(a,e)=>{const _=u("n-icon"),$=u("NInput"),g=u("CButton"),H=u("NDataTable"),z=u("n-spin"),h=u("n-popover"),K=u("n-input"),c=u("n-form-item"),O=u("n-switch"),j=u("n-form"),E=u("n-drawer-content"),G=u("NDrawer");return Q(),J("div",re,[s("div",ie,[s("div",de,[t($,{value:d.value.modelKeyName,"onUpdate:value":e[0]||(e[0]=o=>d.value.modelKeyName=o),placeholder:"密钥名称",style:{width:"288px"},class:"header_box_item",onKeyup:Y(y,["enter"])},{prefix:l(()=>[t(_,{component:i(ae)},null,8,["component"])]),_:1},8,["value"]),t(g,{onClick:y,icon:i(ne),type:"CSuccess"},{default:l(()=>[...e[9]||(e[9]=[w("搜 索",-1)])]),_:1},8,["icon"]),t(g,{onClick:e[1]||(e[1]=o=>S()),icon:i(I),type:"CPrimary"},{default:l(()=>[...e[10]||(e[10]=[w("添 加",-1)])]),_:1},8,["icon"])]),t(z,{size:"large",show:b.value},{default:l(()=>[s("div",pe,[t(H,{columns:F.value,data:V.value,bordered:!0},null,8,["columns","data"])])]),_:1},8,["show"]),t(le,{modelValue:d.value,"onUpdate:modelValue":[e[2]||(e[2]=o=>d.value=o),M],total:C.value},null,8,["modelValue","total"])]),t(G,{show:p.value,"onUpdate:show":e[8]||(e[8]=o=>p.value=o),width:"40%"},{default:l(()=>[t(E,{title:m.value===1?"添加密钥":"密钥信息"},{footer:l(()=>[t(z,{show:v.value},{default:l(()=>[s("div",fe,[s("div",ye,[t(g,{onClick:T,icon:i(I),type:"CPrimary"},{default:l(()=>[w(Z(m.value===1?"添 加":"修 改"),1)]),_:1},8,["icon"]),t(g,{onClick:A,icon:i(oe)},{default:l(()=>[...e[17]||(e[17]=[w("取 消",-1)])]),_:1},8,["icon"])])])]),_:1},8,["show"])]),default:l(()=>[t(j,{ref_key:"formRef",ref:x,model:n.value,rules:R.value},{default:l(()=>[t(c,{path:"modelKeyName"},{label:l(()=>[s("div",me,[e[12]||(e[12]=s("span",null,"密钥名称",-1)),t(h,{trigger:"hover"},{trigger:l(()=>[t(i(N),{size:"18"},{default:l(()=>[t(i(k))]),_:1})]),default:l(()=>[e[11]||(e[11]=s("span",null,"和平台模型名称保持一致，如：hunyuan-lite",-1))]),_:1})])]),default:l(()=>[t(K,{value:n.value.modelKeyName,"onUpdate:value":e[3]||(e[3]=o=>n.value.modelKeyName=o),placeholder:"请输入密钥名称"},null,8,["value"])]),_:1}),t(c,{path:"apiKeyValue"},{label:l(()=>[s("div",ve,[e[14]||(e[14]=s("span",null,"密钥值",-1)),t(h,{trigger:"hover"},{trigger:l(()=>[t(i(N),{size:"18"},{default:l(()=>[t(i(k))]),_:1})]),default:l(()=>[e[13]||(e[13]=s("span",null,"后台创建获取的apiKey",-1))]),_:1})])]),default:l(()=>[t(K,{value:n.value.apiKeyValue,"onUpdate:value":e[4]||(e[4]=o=>n.value.apiKeyValue=o),placeholder:"请输入密钥值"},null,8,["value"])]),_:1}),t(c,{path:"baseUrl"},{label:l(()=>[s("div",ce,[e[16]||(e[16]=s("span",null,"模型地址",-1)),t(h,{trigger:"hover"},{trigger:l(()=>[t(i(N),{size:"18"},{default:l(()=>[t(i(k))]),_:1})]),default:l(()=>[e[15]||(e[15]=s("span",null,"模型的请求地址，如混元的请求地址：https://api.hunyuan.cloud.tencent.com/v1",-1))]),_:1})])]),default:l(()=>[t(K,{value:n.value.baseUrl,"onUpdate:value":e[5]||(e[5]=o=>n.value.baseUrl=o),placeholder:"请输入模型地址"},null,8,["value"])]),_:1}),t(c,{label:"密钥描述",path:"apiKeyDesc"},{default:l(()=>[t(K,{value:n.value.apiKeyDesc,"onUpdate:value":e[6]||(e[6]=o=>n.value.apiKeyDesc=o),placeholder:"请输入密钥描述",type:"textarea",autosize:{minRows:3}},null,8,["value"])]),_:1}),t(c,{label:"是否启用",path:"status"},{default:l(()=>[t(O,{"checked-value":1,"unchecked-value":2,value:n.value.status,"onUpdate:value":e[7]||(e[7]=o=>n.value.status=o)},null,8,["value"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])])}}},xe=L(_e,[["__scopeId","data-v-175ae8a6"]]);export{xe as default};
