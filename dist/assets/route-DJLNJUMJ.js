import{_ as Z,r as i,q as J,B as Q,j as r,e as W,o as Y,f as s,h as t,w as l,k as u,m as ee,n as w,G as te,$ as le,Z as ne,a0 as ae,a1 as oe,z as N,X as se}from"./index-DMicvl7E.js";import{I as y}from"./Icon-CJQe588t.js";import{P as ue}from"./pagination-BeRdfJKn.js";import{_ as V}from"./dictTag-DbkYWqrS.js";import{F as re,A as I,R as ie}from"./ReturnDownBackOutline-p-vbYhRe.js";import{S as de}from"./SearchCircle-CIxQSjVl.js";import{H as h}from"./HelpCircle-Hdoj66Xd.js";const pe={class:"main-content main_body"},ve={class:"main_body_content"},me={class:"header_box"},fe={class:"content_box"},_e={style:{display:"flex","align-items":"center"}},ce={style:{display:"flex","align-items":"center"}},ge={style:{display:"flex","align-items":"center"}},ye={style:{display:"flex","align-items":"center"}},he={style:{display:"flex","align-items":"center"}},be={style:{display:"flex"}},ke={__name:"route",setup(we){const x=i(null),v=i(!1),d=i(!1),m=i({title:"添加菜单",btn:1}),P=i({title:{required:!0,message:"请输入菜单名称",trigger:"blur"},path:{required:!0,message:"请输入菜单地址",trigger:"blur"}}),_=i({routeName:"",page:1,pageSize:10}),U=i(0),S={parentComponent:"",title:"",name:"",path:"",hidden:!1,component:"",sorting:1,status:1},a=i({...S}),q=i([{title:"序号",key:"id",render:(n,e)=>`${e+1}`},{title:"菜单名称",key:"title"},{title:"菜单地址",key:"path"},{title:"排序",key:"sorting"},{title:"路由名称",key:"name"},{title:"是否显示",key:"hidden",render(n){return N(V,{dictionaryCode:"sys_menu_hidden",value:n.hidden?2:1,type:n.hidden?"error":"success",round:!0})}},{title:"路径",key:"component"},{title:"状态",key:"status",render(n){return N(V,{dictionaryCode:"sys_status",value:n.status,type:n.status===1?"success":"error",round:!0})}},{title:"操作",key:"action",render(n){return N(se,{round:!0,quaternary:!0,circle:!0,type:"info",onClick:()=>z(n)},{default:()=>"编辑"})}}]),M=i([]),R=i([]),F=n=>{_.value=n,C()},T=n=>{a.value.parentComponent=n},z=n=>{n?(m.value.title="修改菜单",m.value.btn=2,a.value=n):(m.value.title="添加菜单",m.value.btn=1),v.value=!0},$=()=>{v.value=!1},C=()=>{d.value=!0,c()},L=n=>{n.preventDefault(),d.value=!0,x.value?.validate(e=>{if(e)d.value=!1,Nmessage.error("参数校验失败");else switch(m.value.btn){case 1:oe(a.value).then(f=>{d.value=!1,v.value=!1,c(),Nmessage.success("添加成功！")}).catch(f=>{Nmessage.error(f.message),d.value=!1});break;case 2:ae(a.value).then(f=>{d.value=!1,v.value=!1,c(),Nmessage.success("修改成功！")}).catch(f=>{Nmessage.error(f.message),d.value=!1});break}})},c=()=>{le(_.value).then(n=>{U.value=n.total,R.value=n.data,d.value=!1}),ne().then(n=>{M.value=n.data})},O=()=>{a.value={...S}};return J(()=>{c()}),Q(v,(n,e)=>{n||(O(),c())}),(n,e)=>{const f=r("n-icon"),A=r("NInput"),b=r("CButton"),H=r("NDataTable"),B=r("n-spin"),g=r("n-popover"),K=r("n-tree-select"),p=r("n-form-item"),k=r("n-input"),D=r("n-switch"),j=r("n-input-number"),E=r("n-form"),G=r("n-drawer-content"),X=r("NDrawer");return Y(),W("div",pe,[s("div",ve,[s("div",me,[t(A,{value:_.value.routeName,"onUpdate:value":e[0]||(e[0]=o=>_.value.routeName=o),placeholder:"菜单名称",style:{width:"288px"},class:"header_box_item",onKeyup:ee(C,["enter"])},{prefix:l(()=>[t(f,{component:u(re)},null,8,["component"])]),_:1},8,["value"]),t(b,{onClick:C,icon:u(de),type:"CSuccess"},{default:l(()=>[...e[11]||(e[11]=[w("搜 索",-1)])]),_:1},8,["icon"]),t(b,{onClick:e[1]||(e[1]=o=>z()),icon:u(I),type:"CPrimary"},{default:l(()=>[...e[12]||(e[12]=[w("添 加",-1)])]),_:1},8,["icon"])]),t(B,{size:"large",show:d.value},{default:l(()=>[s("div",fe,[t(H,{columns:q.value,data:R.value,bordered:!0},null,8,["columns","data"])])]),_:1},8,["show"]),t(ue,{modelValue:_.value,"onUpdate:modelValue":[e[2]||(e[2]=o=>_.value=o),F],total:U.value},null,8,["modelValue","total"])]),t(X,{show:v.value,"onUpdate:show":e[10]||(e[10]=o=>v.value=o),width:"40%"},{default:l(()=>[t(G,{title:m.value.title},{footer:l(()=>[t(B,{show:d.value},{default:l(()=>[s("div",be,[t(b,{onClick:L,icon:u(I),type:"CPrimary"},{default:l(()=>[w(te(m.value.btn===1?"添 加":"修 改"),1)]),_:1},8,["icon"]),t(b,{onClick:$,icon:u(ie)},{default:l(()=>[...e[23]||(e[23]=[w("取 消",-1)])]),_:1},8,["icon"])])]),_:1},8,["show"])]),default:l(()=>[t(E,{ref_key:"formRef",ref:x,model:a.value,rules:P.value},{default:l(()=>[t(p,{path:"parentComponent"},{label:l(()=>[s("div",_e,[e[14]||(e[14]=s("span",null,"上级菜单",-1)),t(g,{trigger:"hover"},{trigger:l(()=>[t(u(y),{size:"18"},{default:l(()=>[t(u(h))]),_:1})]),default:l(()=>[e[13]||(e[13]=s("span",null,"选择后在该菜单下展示，不选为一级菜单",-1))]),_:1})])]),default:l(()=>[t(K,{options:M.value,"default-value":a.value.parentComponent,clearable:"","label-field":"title","key-field":"path","onUpdate:value":T},null,8,["options","default-value"])]),_:1}),t(p,{label:"菜单名称",path:"title"},{default:l(()=>[t(k,{value:a.value.title,"onUpdate:value":e[3]||(e[3]=o=>a.value.title=o),placeholder:"请输入菜单名称"},null,8,["value"])]),_:1}),t(p,{path:"name"},{label:l(()=>[s("div",ce,[e[16]||(e[16]=s("span",null,"路由名称",-1)),t(g,{trigger:"hover"},{trigger:l(()=>[t(u(y),{size:"18"},{default:l(()=>[t(u(h))]),_:1})]),default:l(()=>[e[15]||(e[15]=s("span",null,"路由的name，唯一名称",-1))]),_:1})])]),default:l(()=>[t(k,{value:a.value.name,"onUpdate:value":e[4]||(e[4]=o=>a.value.name=o),placeholder:"请输入路由名称"},null,8,["value"])]),_:1}),t(p,{path:"path"},{label:l(()=>[s("div",ge,[e[18]||(e[18]=s("span",null,"菜单地址",-1)),t(g,{trigger:"hover"},{trigger:l(()=>[t(u(y),{size:"18"},{default:l(()=>[t(u(h))]),_:1})]),default:l(()=>[e[17]||(e[17]=s("span",null,"页面地址",-1))]),_:1})])]),default:l(()=>[t(k,{value:a.value.path,"onUpdate:value":e[5]||(e[5]=o=>a.value.path=o),placeholder:"请输入菜单地址"},null,8,["value"])]),_:1}),t(p,{label:"是否隐藏菜单",path:"hidden"},{default:l(()=>[t(D,{"checked-value":!0,"unchecked-value":!1,value:a.value.hidden,"onUpdate:value":e[6]||(e[6]=o=>a.value.hidden=o)},null,8,["value"])]),_:1}),t(p,{path:"component"},{label:l(()=>[s("div",ye,[e[20]||(e[20]=s("span",null,"组件路径",-1)),t(g,{trigger:"hover"},{trigger:l(()=>[t(u(y),{size:"18"},{default:l(()=>[t(u(h))]),_:1})]),default:l(()=>[e[19]||(e[19]=s("span",null,"component渲染菜单，非终极菜单请勿填写",-1))]),_:1})])]),default:l(()=>[t(k,{value:a.value.component,"onUpdate:value":e[7]||(e[7]=o=>a.value.component=o),placeholder:"请输入组件路径"},null,8,["value"])]),_:1}),t(p,{label:"排序",path:"sorting"},{default:l(()=>[t(j,{value:a.value.sorting,"onUpdate:value":e[8]||(e[8]=o=>a.value.sorting=o),min:1,placeholder:"请输入排序"},null,8,["value"])]),_:1}),t(p,{label:"状态",path:"status"},{default:l(()=>[t(D,{"checked-value":1,"unchecked-value":2,value:a.value.status,"onUpdate:value":e[9]||(e[9]=o=>a.value.status=o)},null,8,["value"])]),_:1}),t(p,null,{label:l(()=>[s("div",he,[e[22]||(e[22]=s("span",null,"组件缓存",-1)),t(g,{trigger:"hover"},{trigger:l(()=>[t(u(y),{size:"18"},{default:l(()=>[t(u(h))]),_:1})]),default:l(()=>[e[21]||(e[21]=s("span",null,"页面组件配置name属性，与路由名称相符即自动缓存，最大10个",-1))]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])])}}},ze=Z(ke,[["__scopeId","data-v-31d39488"]]);export{ze as default};
