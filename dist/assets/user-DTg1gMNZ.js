import{b as L,e as N,o as h,f as n,_ as P,j as r,s as R,w as t,h as o,n as v,u as X,r as m,q as Y,B as Z,k as _,m as ee,F as oe,C as te,R as ne,G as S,M as le,a3 as se,a4 as ae,a5 as re,a6 as ue}from"./index-DMicvl7E.js";import{I as ie}from"./Icon-CJQe588t.js";import{P as de}from"./pagination-BeRdfJKn.js";import{g as ce}from"./role-C54TQx-G.js";import{F as pe,A,R as me}from"./ReturnDownBackOutline-p-vbYhRe.js";import{S as _e}from"./SearchCircle-CIxQSjVl.js";import{H as ve}from"./HelpCircle-Hdoj66Xd.js";const fe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},he=L({name:"ArchiveOutline",render:function(c,a){return h(),N("svg",fe,a[0]||(a[0]=[n("path",{d:"M80 152v256a40.12 40.12 0 0 0 40 40h272a40.12 40.12 0 0 0 40-40V152",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),n("rect",{x:"48",y:"64",width:"416",height:"80",rx:"28",ry:"28",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M320 304l-64 64l-64-64"},null,-1),n("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 345.89V224"},null,-1)]))}}),ge={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},we=L({name:"TrashBin",render:function(c,a){return h(),N("svg",ge,a[0]||(a[0]=[n("rect",{x:"32",y:"48",width:"448",height:"80",rx:"32",ry:"32",fill:"currentColor"},null,-1),n("path",{d:"M74.45 160a8 8 0 0 0-8 8.83l26.31 252.56a1.5 1.5 0 0 0 0 .22A48 48 0 0 0 140.45 464h231.09a48 48 0 0 0 47.67-42.39v-.21l26.27-252.57a8 8 0 0 0-8-8.83zm248.86 180.69a16 16 0 1 1-22.63 22.62L256 318.63l-44.69 44.68a16 16 0 0 1-22.63-22.62L233.37 296l-44.69-44.69a16 16 0 0 1 22.63-22.62L256 273.37l44.68-44.68a16 16 0 0 1 22.63 22.62L278.62 296z",fill:"currentColor"},null,-1)]))}}),xe={name:"UploadFile",components:{ArchiveIcon:he},props:{modelValue:{type:String,default:()=>""}},emits:["update:modelValue"],setup(w,{emit:c}){const a=w.modelValue,s="undefined/file/upload",p=X();return{modelValue:a,action:s,userStore:p,onError:d=>{console.log("上传失败",d)},onFinish:d=>{const{data:g}=JSON.parse(d.event.currentTarget.response);c("update:modelValue",void 0+g.url)}}}},ke={style:{"margin-bottom":"12px"}};function ye(w,c,a,s,p,U){const x=r("ArchiveIcon"),d=r("n-icon"),g=r("n-text"),b=r("n-p"),u=r("n-upload-dragger"),V=r("n-upload");return h(),R(V,{multiple:"","directory-dnd":"",action:s.action,max:5,onError:s.onError,onFinish:s.onFinish,headers:{Authorization:s.userStore.getToken()}},{default:t(()=>[o(u,null,{default:t(()=>[n("div",ke,[o(d,{size:"48",depth:3},{default:t(()=>[o(x)]),_:1})]),o(g,{style:{"font-size":"1rem"}},{default:t(()=>[...c[0]||(c[0]=[v(" 点击或者拖动文件到该区域来上传 ",-1)])]),_:1}),o(b,{depth:"3",style:{margin:"8px 0 0 0","font-size":"0.8rem"}},{default:t(()=>[...c[1]||(c[1]=[v(" 请不要上传敏感数据，比如你的银行卡号和密码，信用卡号有效期和安全码 ",-1)])]),_:1})]),_:1})]),_:1},8,["action","onError","onFinish","headers"])}const Ce=P(xe,[["render",ye]]),Ne={class:"main-content main_body"},be={class:"main_body_content"},Ve={class:"header_box"},Se={class:"content_box"},Ue={class:"user_item"},Ie=["onClick"],Fe={style:{position:"absolute",top:"0"}},Be=["src"],ze={class:"user_box_info"},Ae={class:"user_box_info_name"},Le={class:"user_box_info_other"},Pe={style:{display:"flex","align-items":"center"}},Re={style:{display:"flex"}},Te={style:{flex:"1",display:"flex"}},je=Object.assign({name:"system_user"},{__name:"user",setup(w){const c=m(null),a=m(!1),s=m(!1),p=m(1),U=m({userName:{required:!0,message:"请输入用户名称",trigger:"blur"}}),x=m([]),d=m({userName:"",page:1,pageSize:10}),g=m(0),b={avatar:"",userName:"",phoneNumber:"",roleCode:[]},u=m({...b}),V=m([]),T=i=>{d.value=i,I()},j=()=>{p.value=1,a.value=!0},D=i=>{p.value=2,u.value={...i},a.value=!0},F=()=>{a.value=!1},I=()=>{s.value=!0,k()},E=i=>{i.preventDefault(),s.value=!0,c.value?.validate(e=>{e?(s.value=!1,Nmessage.error("参数校验失败")):p.value===1?ae(u.value).then(f=>{s.value=!1,a.value=!1,k(),Nmessage.success("添加成功！")}).catch(f=>{Nmessage.error(f.message),s.value=!1}):p.value===2&&re(u.value).then(f=>{s.value=!1,a.value=!1,k(),Nmessage.success("修改成功！")}).catch(f=>{Nmessage.error(f.message),s.value=!1})})},M=()=>{ue({userId:u.value.userId}).then(i=>{Nmessage.success("删除成功！"),a.value=!1,s.value=!1,k()}).catch(i=>{Nmessage.error(i.message),s.value=!1})},k=()=>{se(d.value).then(i=>{g.value=i.total,V.value=i.data,s.value=!1}),ce().then(i=>{x.value=i.data})},O=()=>{u.value={...b}};return Y(()=>{k()}),Z(a,(i,e)=>{i||O()}),(i,e)=>{const f=r("n-icon"),$=r("NInput"),y=r("CButton"),B=r("n-spin"),C=r("n-form-item"),z=r("n-input"),q=r("n-cascader"),H=r("n-popover"),K=r("n-form"),G=r("n-popconfirm"),J=r("n-drawer-content"),W=r("NDrawer");return h(),N("div",Ne,[n("div",be,[n("div",Ve,[o($,{value:d.value.userName,"onUpdate:value":e[0]||(e[0]=l=>d.value.userName=l),placeholder:"用户名称",style:{width:"288px"},class:"header_box_item",onKeyup:ee(I,["enter"])},{prefix:t(()=>[o(f,{component:_(pe)},null,8,["component"])]),_:1},8,["value"]),o(y,{onClick:I,icon:_(_e),type:"CSuccess"},{default:t(()=>[...e[7]||(e[7]=[v("搜 索",-1)])]),_:1},8,["icon"]),o(y,{onClick:j,icon:_(A),type:"CPrimary"},{default:t(()=>[...e[8]||(e[8]=[v("添 加",-1)])]),_:1},8,["icon"])]),o(B,{size:"large",show:s.value},{default:t(()=>[n("div",Se,[n("div",Ue,[(h(!0),N(oe,null,te(V.value,(l,Q)=>(h(),N("div",{class:"user_box",key:Q,onClick:De=>D(l)},[n("div",{style:ne({width:"100%",height:"100%","background-image":`url(${l.avatar})`,backgroundSize:"cover",filter:"blur(8px)"})},null,4),n("div",Fe,[n("img",{class:"user_box_img",src:l.avatar},null,8,Be),n("div",ze,[n("div",Ae,[n("div",null,S(l.userName),1)]),n("div",Le,[n("div",null,S(l.phoneNumber),1),n("div",null,S(l.createTime),1)])])])],8,Ie))),128))])])]),_:1},8,["show"]),o(de,{modelValue:d.value,"onUpdate:modelValue":[e[1]||(e[1]=l=>d.value=l),T],total:g.value},null,8,["modelValue","total"])]),o(W,{show:a.value,"onUpdate:show":e[6]||(e[6]=l=>a.value=l),width:"40%"},{default:t(()=>[o(J,{title:p.value===1?"添加用户":"用户信息"},{footer:t(()=>[o(B,{show:s.value},{default:t(()=>[n("div",Re,[n("div",Te,[o(y,{onClick:E,icon:_(A),type:"CPrimary"},{default:t(()=>[v(S(p.value===1?"添 加":"修 改"),1)]),_:1},8,["icon"]),o(y,{onClick:F,icon:_(me)},{default:t(()=>[...e[11]||(e[11]=[v("取 消",-1)])]),_:1},8,["icon"])]),p.value==2?(h(),R(G,{key:0,onPositiveClick:M,"negative-text":"取消","positive-text":"确定"},{trigger:t(()=>[o(y,{onClick:F,icon:_(we),type:"CWarning"},{default:t(()=>[...e[12]||(e[12]=[v("删 除",-1)])]),_:1},8,["icon"])]),default:t(()=>[e[13]||(e[13]=v(" 确定删除该用户？ ",-1))]),_:1})):le("",!0)])]),_:1},8,["show"])]),default:t(()=>[o(K,{ref_key:"formRef",ref:c,model:u.value,rules:U.value},{default:t(()=>[o(C,{label:"用户头像",path:"avatar"},{default:t(()=>[o(Ce,{modelValue:u.value.avatar,"onUpdate:modelValue":e[2]||(e[2]=l=>u.value.avatar=l)},null,8,["modelValue"])]),_:1}),o(C,{label:"用户名称",path:"userName"},{default:t(()=>[o(z,{value:u.value.userName,"onUpdate:value":e[3]||(e[3]=l=>u.value.userName=l),placeholder:"请输入用户名称"},null,8,["value"])]),_:1}),o(C,{label:"手机号",path:"phoneNumber"},{default:t(()=>[o(z,{type:"Number",value:u.value.phoneNumber,"onUpdate:value":e[4]||(e[4]=l=>u.value.phoneNumber=l),placeholder:"请输入手机号"},null,8,["value"])]),_:1}),o(C,{label:"角色",path:"roleCode"},{default:t(()=>[o(q,{value:u.value.roleCode,"onUpdate:value":e[5]||(e[5]=l=>u.value.roleCode=l),multiple:"",placeholder:"请选择角色信息",options:x.value,"label-field":"roleName","value-field":"roleCode",cascade:!0,"check-strategy":"all","show-path":!0,"max-tag-count":"responsive","allow-checking-not-loaded":!1},null,8,["value","options"])]),_:1}),o(C,null,{label:t(()=>[n("div",Pe,[e[10]||(e[10]=n("span",null,"用户密码",-1)),o(H,{trigger:"hover"},{trigger:t(()=>[o(_(ie),{size:"18"},{default:t(()=>[o(_(ve))]),_:1})]),default:t(()=>[e[9]||(e[9]=n("span",null,"新用户默认密码为：123456。需要修改密码请在个人信息页面",-1))]),_:1})])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])]),_:1},8,["show"])])}}}),Ge=P(je,[["__scopeId","data-v-1f545247"]]);export{Ge as default};
